#include <criterion/criterion.h>
#include <stdint.h>
#include <stdio.h>

void interpret(const char *code, char *output);

static void test_one(const char *code, const char *expected) {
  char actual[100];
  interpret(code, actual);
  cr_assert_str_eq(actual, expected, "Expected: %s Actual: %s", expected, actual);
}

Test(ministringfuck_test, blank) {
  test_one("", "");
}

Test(ministringfuck_test, single_char) {
  test_one("++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++.", "H");
}

Test(ministringfuck_test, hello_world) {
  test_one("++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++.+++++++++++++++++++++++++++++.+++++++"
           "..+++.++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++"
           "+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++.++++++++++++++++++++++++"
           "++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++"
           "++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++"
           ".+++++++++++++++++++++++++++++++++++++++++++++++++++++++.++++++++++++++++++++++++.+++.++++++++++++++++++++++++"
           "++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++"
           "++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++"
           "++++++.+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++"
           "++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++"
           "+++++++++++++++++++++++++++++++++++.++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++"
           "++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++"
           "+++++.", "Hello, World!");
}

Test(ministringfuck_test, alphabet) {
  test_one("+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++.+.+.+.+.+.+.+.+.+.+.+.+.+.+.+.+.+.+.+.+.+.+."
           "+.+.+.", "ABCDEFGHIJKLMNOPQRSTUVWXYZ");
}

Test(ministringfuck_test, dirty_hello_world) {
  test_one("+++++sdfs++++sdf++++sdklfjsdklfdjmvncxmnxmiuroewurwio+++++++++++++2423423++234+23++234+23++342+2++24++234+++++"
           "+++++++++???++++++%+++++$#$#++++++++.+++++ssdf+++++++++++++++S+SDFSFSFWWET+BCV+BC+VBN+V+X+++.+++++++.WER.+++.+"
           "+++++++++++++++++WERW+ERWE++++++++++++XCV+XC++++++++++++++++CXV+XC+XCV++++++++++++++++++++++++XCVXCXCVSTTYJFGD"
           "F++++++++++++++++s+dfs+sdf++sdsd+f++SDFS+DFS+FdfsdRTETRCBVCsdfsdf+++++++++++++++++++++++++++++++++++++++++++++"
           "+++++++++++++++++++++++++++++++++++++++++++++.++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++"
           "++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++"
           "++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++.+++++++++++++++++++++++++++++++++++++++"
           "++++++++++++++++.++++++++++++++++++++++++.+++.++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++"
           "++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++"
           "++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++.+++++++++++++++++++++++++++++++++"
           "++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++"
           "+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++.++++"
           "++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++"
           "+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++.", "Hello, World!");
}

Test(ministringfuck_test, dirty_alphabet) {
  test_one("+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++.\n+.\n+.\n+.\n+.\n+.\n+.\n+.\n+.\n+.\n+.\n+."
           "\n+.\n+.\n+.\n+.\n+.\n+.\n+.\n+.\n+.\n+.\n+.\n+.\n+.\n+.\n", "ABCDEFGHIJKLMNOPQRSTUVWXYZ");
}
